<div *ngIf="actividad" style="max-width: 800px; margin: 2rem auto; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); background-color: #fff; font-family: 'Segoe UI', sans-serif;">

  <h2 style="font-size: 2rem; margin-bottom: 1rem; color: #333;">{{ actividad.titulo }}</h2>

  <img [src]="actividad.imagenUrl || 'assets/images/default-actividad.jpg'"
       [alt]="actividad.titulo"
       (error)="onImageError($event)"
       style="width: 100%; max-height: 400px; object-fit: cover; border-radius: 8px; margin-bottom: 1.5rem;" />

  <div style="margin-bottom: 1.5rem;">
    <p><strong>🎯 Tipo:</strong> {{ actividad.tipo }}</p>
    <p><strong>📝 Descripción:</strong> {{ actividad.descripcion }}</p>
    <p><strong>💰 Precio base:</strong> S/. {{ actividad.precioBase | number:'1.2-2' }}</p>
    <p><strong>⏰ Duración:</strong> {{ actividad.duracionHoras }} horas</p>
  </div>

  <!-- Sección de botones para usuarios autenticados -->
  <div *ngIf="isAuthenticated" style="margin-top: 2rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
    <label for="cantidadInput">👥 Cantidad de personas:</label>
    <input
      id="cantidadInput"
      type="number"
      [(ngModel)]="cantidadCarrito"
      min="1"
      max="20"
      style="width: 70px; padding: 0.25rem; border: 1px solid #ccc; border-radius: 4px;"
    />

    <button (click)="agregarAlCarrito()"
            style="background-color: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
      🛒 Agregar al Carrito
    </button>

    <button (click)="manejarReserva()"
            style="background-color: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
      📝 Reservar
    </button>
  </div>

  <!-- Si el usuario NO está autenticado -->
  <div *ngIf="!isAuthenticated" style="padding: 1rem; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #dee2e6;">
    <p style="margin-bottom: 1rem; color: #6c757d;">
      💡 Para realizar una reserva, necesitas iniciar sesión o registrarte
    </p>

    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
      <button (click)="manejarReserva()"
              style="background-color: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
        🔐 Iniciar Sesión
      </button>
      <button (click)="irAlRegistro()"
              style="background-color: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
        📝 Registrarse
      </button>
    </div>
  </div>

  <!-- Componente de formulario de reserva -->
  <app-crearreserva
    *ngIf="mostrarFormulario && isAuthenticated"
    [actividadId]="actividad.idActividad"
    [tipoReserva]="'ACTIVIDAD'"
    (reservaExitosa)="onReservaExitosa()"
    (volverAlPaquete)="onVolverAlPaquete()">
  </app-crearreserva>

  <!-- Info adicional -->
  <div style="margin-top: 1.5rem; padding: 1rem; background-color: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
    <h4 style="margin: 0 0 0.5rem 0; color: #1976d2;">ℹ️ Información importante</h4>
    <ul style="margin: 0; padding-left: 1.2rem; color: #555;">
      <li>El precio incluye todos los servicios mencionados</li>
      <li>Las reservas están sujetas a disponibilidad</li>
      <li>Se requiere confirmación para procesar la reserva</li>
      <li>Duración: {{ actividad.duracionHoras }} horas</li>
      <li>Tipo de actividad: {{ actividad.tipo }}</li>
    </ul>
  </div>
</div>

<!-- Loading -->
<div *ngIf="!actividad" style="text-align: center; padding: 2rem;">
  <p>Cargando información de la actividad...</p>
</div>
